<!DOCTYPE html>
<!--[if IE 8]>
<html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9]>
<html lang="en" class="ie9"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en" xmlns:v-bind="http://www.w3.org/1999/xhtml"> <!--<![endif]-->
<head>
    <title> 乐鲜商城 | 订单总览</title>

    <!-- Meta -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Favicon -->
    <link rel="shortcut icon" href="favicon.ico">

    <!-- CSS Global Compulsory -->
    <link rel="stylesheet" href="assets/plugins/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/shop.style.css">

    <!-- CSS Implementing Plugins -->
    <link rel="stylesheet" href="assets/plugins/line-icons/line-icons.css">
    <link rel="stylesheet" href="assets/plugins/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="assets/plugins/scrollbar/src/perfect-scrollbar.css">

    <!-- CSS Page Style -->
    <link rel="stylesheet" href="assets/css/pages/log-reg-v3.css">

    <!-- Style Switcher -->
    <link rel="stylesheet" href="assets/css/plugins/style-switcher.css">

    <!-- CSS Theme -->
    <link rel="stylesheet" href="assets/css/theme-colors/default.css" id="style_color">

    <!-- CSS Customization -->
    <link rel="stylesheet" href="assets/css/custom.css">
</head>

<body class="header-fixed">

<div class="wrapper">
    <!--=== Header v5 ===-->
    <div class="header-v5 header-static">
        <!-- Topbar v3 -->
        <div class="topbar-v3">
            <div class="search-open">
                <div class="container">
                    <input type="text" class="form-control" placeholder="Search">
                    <div class="search-close"><i class="icon-close"></i></div>
                </div>
            </div>

            <div class="container">
                <div class="row">
                    <!-- <div class="col-sm-6">
                         <ul class="list-inline right-topbar pull-right">
                             <li><a href="#">我的账户</a></li>
                             <li><a href="shop-myShopCart.html">我的收藏夹 (0)</a></li>
                             <li><a hrshop-login.htmlhtml">登录</a> | <a href="shop-ui-register.html">注册</a></li>
                             <li><i class="search fa fa-search search-button"></i></li>
                         </ul>
                     </div>-->
                </div>
            </div><!--/container-->
        </div>
        <!-- End Topbar v3 -->

        <!-- Navbar -->
        <div class="navbar navbar-default mega-menu" role="navigation">
            <div class="container">
                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header">
                    <a class="navbar-brand" href="index.html" style="margin-top: 25px">
                        <!--<img id="logo-header" src="assets/img/logo.png" alt="Logo">-->
                        乐鲜mall
                    </a>
                </div>

                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse navbar-responsive-collapse">
                    <!-- Badge -->
                    <ul class="list-inline shop-badge badge-lists badge-icons pull-right"
                        style="font-size: 20px;margin-top: 10px">
                        <li class="dropdown active">
                            <a href="/" class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown">
                                首页
                            </a>
                        </li>
                        <!-- End Pages -->
                        <!-- Promotion -->
                        <li class="dropdown">
                            <a href="#!" target="_blank">商品分类</a>
                            <ul id="category" class="badge-open home-category">
                                <li></li>
                                <li v-for="item in map.categoryLists">
                                    <!--shop-category.html?categoryId=item.categoryid-->
                                    <a v-bind:href="['shop-category.html?categoryId='+item.categoryid+'&categorytitle='+item.categorytitle]"
                                       target="_blank">{{item.categorytitle}}</a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                    <!-- End Badge -->

                    <ul class="nav navbar-nav">
                        <!--<li>-->
                        <!--<input type="text" class="form-control" placeholder="Search">-->
                        <!--</li>-->
                        <!--&lt;!&ndash; Pages &ndash;&gt;-->
                        <li class="dropdown active">
                        </li>
                    </ul>
                </div><!--/navbar-collapse-->
            </div>
        </div>
        <!-- End Navbar -->
    </div>

    <!--=== Content Medium Part ===-->
    <div class="content-md margin-bottom-30">
        <div class="container">
            <form class="shopping-cart" id="allMyOrders" action="#">
                <div>
                    <section>
                        <div class="table-responsive">
                            <table class="table table-striped">
                                <thead>
                                <tr>
                                    <th>订单编号</th>
                                    <th>订单时间</th>
                                    <th>用户账号</th>
                                    <th>订单总价</th>
                                    <th>订单状态</th>
                                    <th>订单操作时间</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr v-for="item in map.pageInfo.list">
                                    <td>{{item.orderId}}<a href="#!" class="yulanOrder" :orderId="item.orderId" style="cursor: pointer;">预览订单</a></td>
                                    <td>{{item.orderDatetime}}</td>
                                    <td>{{item.userAccount}}</td>
                                    <td>￥ {{item.orderTotalPrice}}</td>
                                    <td class="shop-red"> {{item.orderStatusDesc}}</td>
                                    <td>
                                        <span v-if="item.finishDatetime!==null">
                                            {{item.finishDatetime}}完成
                                        </span>
                                        <span v-if="item.orderCancleDatetime!==null">
                                            {{item.orderCancleDatetime}}取消
                                        </span>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </section>
                    <hr/>
                </div>
            </form>
        </div><!--/end container-->
    </div>

    <!--=== End Login ===-->

    <!--=== Shop Suvbscribe ===-->
    <!--=== End Shop Suvbscribe ===-->
    <!--=== Footer v4 ===-->
    <div class="footer-v4">
        <div class="footer">
            <div class="container">
                <div class="row">
                    <!-- About -->
                    <div class="col-md-4 md-margin-bottom-40">
                        <a href="/" style="font-size: 30px">
                            <!--<img class="footer-logo" src="assets/img/logo-2.png" alt="">-->
                            乐鲜商城
                        </a>
                        <p>乐鲜精选，只为更好的你！</p>
                        <br>
                        <ul class="list-unstyled address-list margin-bottom-20">
                            <li><i class="fa fa-angle-right"></i>重庆交通大学知园小区</li>
                            <li><i class="fa fa-angle-right"></i>电话: 000 12345678</li>
                            <li><i class="fa fa-angle-right"></i>传真: 000 12345678</li>
                            <li><i class="fa fa-angle-right"></i>邮箱: cqjtu.edu@cqjtu.cn</li>
                        </ul>

                        <ul class="list-inline shop-social">
                            <li><a href="#"><i class="fb rounded-md fa fa-facebook"></i></a></li>
                            <li><a href="#"><i class="tw rounded-md fa fa-twitter"></i></a></li>
                            <li><a href="#"><i class="gp rounded-md fa fa-google-plus"></i></a></li>
                            <li><a href="#"><i class="yt rounded-md fa fa-youtube"></i></a></li>
                        </ul>
                    </div>
                    <!-- End About -->

                    <!-- Simple List -->
                    <div class="col-md-2 col-sm-3">
                        <div class="row">
                            <div class="col-sm-12 col-xs-6">
                                <h2 class="thumb-headline">消费者保障</h2>
                                <ul class="list-unstyled simple-list margin-bottom-20">
                                    <li><a href="#">保障范围 </a></li>
                                    <li><a href="#">退货退款流程</a></li>
                                    <li><a href="#">服务中心 </a></li>
                                    <li><a href="#">更多特色服务</a></li>
                                </ul>
                            </div>

                            <div class="col-sm-12 col-xs-6">
                                <h2 class="thumb-headline">新手上路</h2>
                                <ul class="list-unstyled simple-list">
                                    <li><a href="#">新手专区</a></li>
                                    <li><a href="#">消费警示</a></li>
                                    <li><a href="#">交易安全 </a></li>
                                    <li><a href="#">24小时在线帮助</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-2 col-sm-3">
                        <div class="row">
                            <div class="col-sm-12 col-xs-6">
                                <h2 class="thumb-headline">付款方式</h2>
                                <ul class="list-unstyled simple-list margin-bottom-20">
                                    <li><a href="#">快捷支付</a></li>
                                    <li><a href="#">信用卡</a></li>
                                    <li><a href="#">余额宝 </a></li>
                                </ul>
                            </div>

                            <div class="col-sm-12 col-xs-6">
                                <h2 class="thumb-headline">乐鲜特色</h2>
                                <ul class="list-unstyled simple-list">
                                    <li><a href="#">乐鲜评审</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- End Simple List -->
        </div><!--/end row-->
    </div>
</div><!--/wrapper-->

<!-- JS Global Compulsory -->
<script src="assets/plugins/jquery/jquery.min.js"></script>
<script src="assets/plugins/jquery/jquery-migrate.min.js"></script>
<script src="assets/plugins/bootstrap/js/bootstrap.min.js"></script>
<!-- JS Implementing Plugins -->
<script src="assets/plugins/back-to-top.js"></script>
<!-- Login Form -->
<script src="assets/plugins/sky-forms/version-2.0.1/js/jquery.form.min.js"></script>
<!-- Validation Form -->
<script src="assets/plugins/sky-forms/version-2.0.1/js/jquery.validate.min.js"></script>
<!-- Scrollbar -->
<script src="assets/plugins/scrollbar/src/jquery.mousewheel.js"></script>
<script src="assets/plugins/scrollbar/src/perfect-scrollbar.js"></script>
<!-- JS Customization -->
<script src="assets/js/custom.js"></script>
<script src="/js/jquery.cookie.js"></script>
<script src="/js/app.js"></script>
<script src="/js/vue.js"></script>
<script src="/assets/plugins/layer/layer.js"></script>
<!-- JS Page Level -->
<script src="assets/js/shop.app.js"></script>
<script src="assets/js/forms/page_login.js"></script>
<script src="assets/js/forms/page_contact_form.js"></script>
<script type="text/javascript" src="assets/js/plugins/style-switcher.js"></script>
<script>
    jQuery(document).ready(function () {
        App.init();
        Login.initLogin();
        PageContactForm.initPageContactForm();
        StyleSwitcher.initStyleSwitcher();
    });
</script>
<!--[if lt IE 9]>
<script src="assets/plugins/respond.js"></script>
<script src="assets/plugins/html5shiv.js"></script>
<script src="assets/js/plugins/placeholder-IE-fixes.js"></script>
<script src="assets/plugins/sky-forms/version-2.0.1/js/sky-forms-ie8.js"></script>
<![endif]-->
<!--[if lt IE 10]>
<script src="assets/plugins/sky-forms/version-2.0.1/js/jquery.placeholder.min.js"></script>
<![endif]-->
<script type="text/javascript">
    var index = layer.load(0, {
        shade: [0.1,'#dbdbdb'] //0.1透明度的白色背景
    });
    $.ajax({
        url:"/user/order/query",
        type:"post",
        data:{token:$.LeXian.getMyToken()},
        success:function (data) {
            console.log(data);
            new Vue({
                el:"#allMyOrders",
                data:data
            });
        }
    });
    layer.close(index);
    $('body').on('click',".yulanOrder",function () {
        var html;
        $.ajax({
            url:'/user/order/queryDetail',
            type:"post",
            async:false,
            data:{token:$.LeXian.getMyToken(),orderId:$(this).attr("orderId")},
            success:function (data) {
                var index = layer.load(0, {
                    shade: [0.2, '#4b606a'] //0.1透明度的白色背景
                });
                console.log(data.map.orderDetail);
                for(var i=0;i<data.map.orderDetail.length;i++){
                    var content="<span>订单编号:</span>"+data.map.orderDetail[i].orderid+"<br/>"+
                        "<span>商品数量:</span>"+data.map.orderDetail[i].orderdetailProductionAmount+"<br/>"+
                        "<span>商品价格:</span>"+data.map.orderDetail[i].orderdetailProductionPrice+"<br/>"+
                        "<span>商品编号:</span>"+data.map.orderDetail[i].orderdetailProductionId+"<br/>"+
                        "<span>详情编号:</span>"+data.map.orderDetail[i].orderdetailId+"<br/>";
                }
                html=content;
/*
                layer.tips('我是另外一个tips，只不过我长得跟之前那位稍有些不一样。', '吸附元素选择器', {
                    tips: [1, '#3595CC'],
                    time: 4000
                });*/
                //页面层
                layer.open({
                    type: 0,
                    title:"我的订单详情",
                    skin: 'layui-layer-rim', //加上边框
                    area: ['520px', '340px'], //宽高
                    content: content
                });
                layer.close(index);
            }
        });


    });
</script>
</body>
</html> 